[
    {
        "change_date": 1737112034891.0,
        "changed_by": {
            "id": "2e501ed7-9bdf-4dd6-8328-d853f30e6a1b",
            "name": "c.demosthenous",
            "type_": "USER"
        },
        "created_by": {
            "id": "2e501ed7-9bdf-4dd6-8328-d853f30e6a1b",
            "name": "c.demosthenous",
            "type_": "USER"
        },
        "creation_date": 1736343996235.0,
        "data_connection_id": "ad7bbed7-c036-4eb3-8f14-4924d1759a4b",
        "description": null,
        "disabled": null,
        "display_name": "RequisitionItem - 1",
        "draft": null,
        "factory_id": "7a33a0b2-1ae0-4981-a711-9da2ca659b9f",
        "factory_validation_status": "VALID",
        "has_user_template": null,
        "local_parameters": [
            {
                "name": "TimezoneOffset",
                "value": "-3"
            }
        ],
        "namespace": "custom",
        "target": {
            "entity_ref": {
                "name": "RequisitionItem",
                "namespace": "custom"
            },
            "kind": "OBJECT"
        },
        "transformations": [
            {
                "change_sql_factory_datasets": [],
                "foreign_key_names": [
                    "ContractItem",
                    "OperationalContract",
                    "OperationalContractLineItem",
                    "PurchaseRequisitionItem",
                    "Requisition"
                ],
                "namespace": "custom",
                "property_names": [
                    "AccountCategory",
                    "AccountCategoryUniqueName",
                    "AccountingsType",
                    "Amount",
                    "AmountAmount",
                    "AmountAmountInReportingCurrency",
                    "AmountApproxAmountInBaseCurrency",
                    "AmountConversionDate",
                    "AmountCurrencyUniqueName",
                    "BasePrice",
                    "BasePriceAmountInReportingCurrency",
                    "BasePriceApproxAmountInBaseCurrency",
                    "BasePriceConversionDate",
                    "BasePriceCurrencyUniqueName",
                    "BoughtFromPreferredSupplier",
                    "CommodityCode",
                    "CommodityCodeUniqueName",
                    "CommodityExportMapEntry",
                    "CommodityExportMapEntryAccountTypeName",
                    "CommodityExportMapEntryAccountTypeUniqueName",
                    "CommodityExportMapEntryCommodityCodeName",
                    "CommodityExportMapEntryCommodityCodeUniqueName",
                    "DeliverTo",
                    "Description",
                    "DescriptionCatalogItemRefCommonSupplierSystemID",
                    "DescriptionCatalogItemRefSupplierPartNumber",
                    "DescriptionCommonCommodityCode",
                    "DescriptionCommonCommodityCodeName",
                    "DescriptionCommonCommodityCodeUniqueName",
                    "DescriptionCustomPrice",
                    "DescriptionCustomPriceAmount",
                    "DescriptionCustomPriceAmountInReportingCurrency",
                    "DescriptionCustomPriceApproxAmountInBaseCurrency",
                    "DescriptionCustomPriceConversionDate",
                    "DescriptionCustomPriceCurrencyUniqueName",
                    "DescriptionExtAttributesBitMask",
                    "DescriptionIsPartialItem",
                    "DescriptionLeadTime",
                    "DescriptionLineItem",
                    "DescriptionLineItemNumberInCollection",
                    "DescriptionPrice",
                    "DescriptionPriceAmount",
                    "DescriptionPriceAmountInReportingCurrency",
                    "DescriptionPriceApproxAmountInBaseCurrency",
                    "DescriptionPriceConversionDate",
                    "DescriptionPriceCurrencyUniqueName",
                    "DescriptionShortName",
                    "DescriptionUnitOfMeasure",
                    "DescriptionUnitOfMeasureUniqueName",
                    "DiverseSupplier",
                    "ERPLineItemNumber",
                    "ERSAllowed",
                    "ExternalLineNumber",
                    "ID",
                    "IsAdHoc",
                    "IsPriceModifiedByUser",
                    "IsRecurring",
                    "KitRequiredItem",
                    "MALineItem",
                    "MALineItemNumberInCollection",
                    "MasterAgreement",
                    "MasterAgreementUniqueName",
                    "NeedBy",
                    "NumberConfirmedAccepted",
                    "NumberConfirmedAcceptedWithChanges",
                    "NumberConfirmedBackOrdered",
                    "NumberConfirmedRejected",
                    "NumberConfirmedSubstituted",
                    "NumberInCollection",
                    "NumberOnPO",
                    "NumberShipped",
                    "OriginalPrice",
                    "OriginalPriceAmount",
                    "OriginalPriceAmountInReportingCurrency",
                    "OriginalPriceApproxAmountInBaseCurrency",
                    "OriginalPriceConversionDate",
                    "OriginalPriceCurrencyUniqueName",
                    "OriginatingSystemLineNumber",
                    "ParentLineNumber",
                    "PurchaseGroup",
                    "PurchaseGroupUniqueName",
                    "PurchaseOrg",
                    "PurchaseOrgUniqueName",
                    "PushStatus",
                    "Quantity",
                    "QuantityInKitItem",
                    "QuickSourced",
                    "QuotePricingTermsNumber",
                    "RequisitionUniqueName",
                    "ShipToCity",
                    "ShipToCountryUniqueName",
                    "ShipToState",
                    "ShipToUniqueName",
                    "Supplier",
                    "SupplierLocation",
                    "SupplierLocationCountryUniqueName",
                    "SupplierLocationState",
                    "SupplierLocationUniqueName",
                    "SupplierName",
                    "SupplierUniqueName",
                    "UsedInReqPush"
                ],
                "property_sql_factory_datasets": [
                    {
                        "id": "RequisitionItemAttributes",
                        "type_": "SQL_FACTORY_DATA_SET",
                        "complete_overwrite": false,
                        "disabled": false,
                        "materialise_cte": false,
                        "overwrite": null,
                        "sql": "WITH TMP_CEL_REQUISITION AS (\n    SELECT\n        * ,\n        ROW_NUMBER() OVER (\n            PARTITION BY \"InitialUniqueName\"\n            ORDER BY\n                CAST(\"VersionNumber\" AS integer) DESC\n        ) AS RN\n    FROM \"Requisition\"\n    WHERE 1=1\n        AND \"Requisition\".\"Active\" = 'true'\n        AND \"Requisition\".\"StatusString\" NOT IN ('Composing')\n)\nSELECT\n    'PurchaseRequisitionItem_' || '300' ||  \"Requisition\".\"ERPRequisitionID\" ||  \"RequisitionLineItems\".\"ERPLineItemNumber\" AS \"PurchaseRequisitionItem\", -- RIGHT('00000' || \"RequisitionLineItems\".\"NumberInCollection\" || '0',5)\n    'RequisitionItem_' || \"Requisition\".\"InitialUniqueName\" || '_' || \"RequisitionLineItems\".\"NumberInCollection\"  AS \"ID\",\n    'OperationalContract_' || \"Contract\".\"InitialUniqueName\" AS \"OperationalContract\",\n    'OperationalContractLineItem_' || \"Contract\".\"InitialUniqueName\" || '_' ||  \"RequisitionLineItems\".\"MALineItem_NumberInCollection\" AS \"OperationalContractLineItem\",\n    'OperationalContractLineItem_' || \"Contract\".\"InitialUniqueName\" || '_' ||  \"RequisitionLineItems\".\"MALineItem_NumberInCollection\" AS \"ContractItem\",\n    'Requisition_' || \"Requisition\".\"InitialUniqueName\" AS \"Requisition\",\n    --\"RequisitionLineItems\".\"NumberOnPO\" AS \"NumberOnPO\",\n    --\"RequisitionLineItems\".\"NumberInCollection\" AS \"NumberInCollection\",\n    --\"RequisitionLineItems\".\"PushStatus\" AS \"PushStatus\",\n    --\"RequisitionLineItems\".\"PurchaseOrg\" AS \"PurchaseOrg\",         JSON FORMAT\n    --\"RequisitionLineItems\".\"Description_CommonCommodityCode\" AS \"DescriptionCommonCommodityCode\", JSON FORMAT\n    --\"RequisitionLineItems\".\"ExternalLineNumber\" AS \"ExternalLineNumber\",\n   -- \"RequisitionLineItems\".\"OriginalPrice\" AS \"OriginalPrice\",       JSON FORMAT\n    \"RequisitionLineItems\".\"IsAdHoc\" AS \"IsAdHoc\",\n    --\"Description_LeadTime\" AS \"DescriptionLeadTime\",\n    CAST(\"RequisitionLineItems\".\"QuantityInKitItem\" AS float) AS \"QuantityInKitItem\",\n    --\"RequisitionLineItems\".\"Accountings_Type\" AS \"AccountingsType\",          JSON FORMAT\n    \"RequisitionLineItems\".\"DiverseSupplier\" AS \"DiverseSupplier\",\n    \"RequisitionLineItems\".\"Description_ShortName\" AS \"DescriptionShortName\",\n    --\"RequisitionLineItems\".\"NumberConfirmedBackOrdered\" AS \"NumberConfirmedBackOrdered\",\n    --\"RequisitionLineItems\".\"AccountCategory\" AS \"AccountCategory\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"Description_Description\" AS \"Description\",\n    --\"NumberConfirmedSubstituted\" AS \"NumberConfirmedSubstituted\",\n    CAST(\"RequisitionLineItems\".\"NeedBy\" AS timestamp) AS \"NeedBy\",\n    --\"RequisitionLineItems\".\"Supplier\" AS \"Supplier\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"Description_IsPartialItem\" AS \"DescriptionIsPartialItem\",\n    \"RequisitionLineItems\".\"IsRecurring\" AS \"IsRecurring\",\n    --\"RequisitionLineItems\".\"SupplierLocation\" AS \"SupplierLocation\",                                              JSON FORMAT\n    CAST(\"RequisitionLineItems\".\"NumberConfirmedRejected\" AS float) AS \"NumberConfirmedRejected\",\n    --\"RequisitionLineItems\".\"MALineItem\" AS \"MALineItem\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"ERPLineItemNumber\" AS \"ERPLineItemNumber\",\n    --\"RequisitionLineItems\".\"MasterAgreement\" AS \"MasterAgreement\",                                              JSON FORMAT\n    --\"RequisitionLineItems\".\"Description_UnitOfMeasure\" AS \"DescriptionUnitOfMeasure\",                                              JSON FORMAT\n    CAST(\"RequisitionLineItems\".\"NumberShipped\" AS float) AS \"NumberShipped\",\n    --\"RequisitionLineItems\".\"Description_CustomPrice\" AS \"DescriptionCustomPrice\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"Description_CatalogItemRef_SupplierPartNumber\" AS \"DescriptionCatalogItemRefSupplierPartNumber\",\n    --\"RequisitionLineItems\".\"CommodityCode\" AS \"CommodityCode\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"IsPriceModifiedByUser\" AS \"IsPriceModifiedByUser\",\n    \"RequisitionLineItems\".\"UsedInReqPush\" AS \"UsedInReqPush\",\n    \"RequisitionLineItems\".\"KitRequiredItem\" AS \"KitRequiredItem\",\n    CAST(\"RequisitionLineItems\".\"NumberConfirmedAccepted\" AS float) AS \"NumberConfirmedAccepted\",\n    --\"RequisitionLineItems\".\"QuotePricingTermsNumber\" AS \"QuotePricingTermsNumber\",\n    CAST(\"RequisitionLineItems\".\"Quantity\" AS float) AS \"Quantity\",\n    --\"ParentLineNumber\" AS \"ParentLineNumber\",\n    --\"Description_ExtAttributesBitMask\" AS \"DescriptionExtAttributesBitMask\",\n    \"RequisitionLineItems\".\"BoughtFromPreferredSupplier\" AS \"BoughtFromPreferredSupplier\",\n    --\"RequisitionLineItems\".\"Description_Price\" AS \"DescriptionPrice\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"QuickSourced\" AS \"QuickSourced\",\n    \"RequisitionLineItems\".\"DeliverTo\" AS \"DeliverTo\",\n    --\"RequisitionLineItems\".\"PurchaseGroup\" AS \"PurchaseGroup\",                                              JSON FORMAT\n    CAST(\"RequisitionLineItems\".\"NumberConfirmedAcceptedWithChanges\" as float) AS \"NumberConfirmedAcceptedWithChanges\",\n   -- \"RequisitionLineItems\".\"Amount\" AS \"Amount\",                                              JSON FORMAT\n    \"RequisitionLineItems\".\"ERSAllowed\" AS \"ERSAllowed\",\n    --\"RequisitionLineItems\".\"BasePrice\" AS \"BasePrice\",                                              JSON FORMAT\n    --\"CommodityExportMapEntry\" AS \"CommodityExportMapEntry\",                                              JSON FORMAT\n    \"Description_CatalogItemRef_CommonSupplierSystemID\" AS \"DescriptionCatalogItemRefCommonSupplierSystemID\",\n    --\"Description_LineItem\" AS \"DescriptionLineItem\",                                              JSON FORMAT\n    --\"OriginatingSystemLineNumber\" AS \"OriginatingSystemLineNumber\",\n    \"Requisition_UniqueName\" AS \"RequisitionUniqueName\",\n    --\"Description_CommonCommodityCode_UniqueName\" AS \"DescriptionCommonCommodityCodeUniqueName\",\n    \"Description_CommonCommodityCode_Name\" AS \"DescriptionCommonCommodityCodeName\",\n    CAST(\"OriginalPrice_AmountInReportingCurrency\" AS float) AS \"OriginalPriceAmountInReportingCurrency\",\n    CAST(\"OriginalPrice_ApproxAmountInBaseCurrency\" AS float) AS \"OriginalPriceApproxAmountInBaseCurrency\",\n    CAST(\"OriginalPrice_Amount\" AS float) AS \"OriginalPriceAmount\",TIMESTAMPADD(HOUR,<%=TimezoneOffset%>,\"OriginalPrice_ConversionDate\") AS \"OriginalPriceConversionDate\",\n    \"OriginalPrice_Currency_UniqueName\" AS \"OriginalPriceCurrencyUniqueName\",\n    \"AccountCategory_UniqueName\" AS \"AccountCategoryUniqueName\",\n     \"RequisitionLineItems\".\"PurchaseOrg_UniqueName\" AS \"PurchaseOrgUniqueName\",\n    \"Description_UnitOfMeasure_UniqueName\" AS \"DescriptionUnitOfMeasureUniqueName\",\n    --\"Description_LineItem_NumberInCollection\" AS \"DescriptionLineItemNumberInCollection\",\n    \"MasterAgreement_UniqueName\" AS \"MasterAgreementUniqueName\",\n    --\"CommodityCode_UniqueName\" AS \"CommodityCodeUniqueName\",\n    \"RequisitionLineItems\".\"Supplier_UniqueName\" AS \"SupplierUniqueName\",\n    \"RequisitionLineItems\".\"Supplier_Name\" AS \"SupplierName\",\n    CAST(\"Amount_AmountInReportingCurrency\" AS float) AS \"AmountAmountInReportingCurrency\",\n    CAST(\"Amount_ApproxAmountInBaseCurrency\" AS float) AS \"AmountApproxAmountInBaseCurrency\",\n    CAST(\"Amount_Amount\" AS float) AS \"AmountAmount\",\n    TIMESTAMPADD(HOUR,<%=TimezoneOffset%>,\"Amount_ConversionDate\") AS \"AmountConversionDate\",\n    \"Amount_Currency_UniqueName\" AS \"AmountCurrencyUniqueName\",\n    CAST(\"Description_CustomPrice_AmountInReportingCurrency\" AS float) AS \"DescriptionCustomPriceAmountInReportingCurrency\",\n    CAST(\"Description_CustomPrice_ApproxAmountInBaseCurrency\" AS float) AS \"DescriptionCustomPriceApproxAmountInBaseCurrency\",\n    CAST(\"Description_CustomPrice_Amount\" AS float) AS \"DescriptionCustomPriceAmount\",\n    TIMESTAMPADD(HOUR,<%=TimezoneOffset%>,\"Description_CustomPrice_ConversionDate\") AS \"DescriptionCustomPriceConversionDate\",\n    \"Description_CustomPrice_Currency_UniqueName\" AS \"DescriptionCustomPriceCurrencyUniqueName\",\n    \"ShipTo_State\" AS \"ShipToState\",\n    \"ShipTo_Country_UniqueName\" AS \"ShipToCountryUniqueName\",\n    \"ShipTo_City\" AS \"ShipToCity\",\n    \"ShipTo_UniqueName\" AS \"ShipToUniqueName\",\n    \"CommodityExportMapEntry_CommodityCode_UniqueName\" AS \"CommodityExportMapEntryCommodityCodeUniqueName\",\n    \"CommodityExportMapEntry_CommodityCode_Name\" AS \"CommodityExportMapEntryCommodityCodeName\",\n    \"CommodityExportMapEntry_AccountType_UniqueName\" AS \"CommodityExportMapEntryAccountTypeUniqueName\",\n    \"CommodityExportMapEntry_AccountType_Name\" AS \"CommodityExportMapEntryAccountTypeName\",\n    CAST(\"BasePrice_AmountInReportingCurrency\" AS float) AS \"BasePriceAmountInReportingCurrency\",\n    CAST(\"BasePrice_ApproxAmountInBaseCurrency\" AS float) AS \"BasePriceApproxAmountInBaseCurrency\",\n    TIMESTAMPADD(HOUR,<%=TimezoneOffset%>,\"BasePrice_ConversionDate\") AS \"BasePriceConversionDate\",\n    \"BasePrice_Currency_UniqueName\" AS \"BasePriceCurrencyUniqueName\",\n    \"RequisitionLineItems\".\"SupplierLocation_State\" AS \"SupplierLocationState\",\n    \"RequisitionLineItems\".\"SupplierLocation_Country_UniqueName\" AS \"SupplierLocationCountryUniqueName\",\n    \"RequisitionLineItems\".\"SupplierLocation_UniqueName\" AS \"SupplierLocationUniqueName\",\n    \"RequisitionLineItems\".\"PurchaseGroup_UniqueName\" AS \"PurchaseGroupUniqueName\",\n    CAST(\"Description_Price_AmountInReportingCurrency\" AS float) AS \"DescriptionPriceAmountInReportingCurrency\",\n    CAST(\"Description_Price_ApproxAmountInBaseCurrency\" AS float) AS \"DescriptionPriceApproxAmountInBaseCurrency\",\n    CAST(\"Description_Price_Amount\" AS float) AS \"DescriptionPriceAmount\",\n    TIMESTAMPADD(HOUR,<%=TimezoneOffset%>,\"Description_Price_ConversionDate\") AS \"DescriptionPriceConversionDate\",\n    \"Description_Price_Currency_UniqueName\" AS \"DescriptionPriceCurrencyUniqueName\"\n    --\"MALineItem_NumberInCollection\" AS \"MALineItemNumberInCollection\"\nFROM \"RequisitionLineItems\"\nJOIN TMP_CEL_REQUISITION AS \"Requisition\" ON 1=1\n    AND \"Requisition\".\"UniqueName\" = \"RequisitionLineItems\".\"Requisition_UniqueName\"\nLEFT JOIN \"Contract\" ON 1=1\n    AND \"RequisitionLineItems\".\"MasterAgreement_UniqueName\" = \"Contract\".\"UniqueName\"\nWHERE 1=1\n    AND \"Requisition\".\"RN\" = 1"
                    }
                ],
                "relationship_transformations": []
            }
        ]
    }
]