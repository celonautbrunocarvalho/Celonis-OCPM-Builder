[
    {
        "change_date": 1740746703009.0,
        "changed_by": {
            "id": "00000000-0000-0000-0000-000000000000",
            "name": "Unknown User",
            "type_": "USER"
        },
        "created_by": {
            "id": "00000000-0000-0000-0000-000000000000",
            "name": "Unknown User",
            "type_": "USER"
        },
        "creation_date": 1740746681925.0,
        "data_connection_id": "b3c59e17-798d-49ea-b0b3-99d0bae2e011",
        "description": null,
        "disabled": true,
        "display_name": "SalesOrder",
        "draft": null,
        "factory_id": "e2c22e02-4b39-4d03-8af7-e14dc213d52f_b3c59e17-798d-49ea-b0b3-99d0bae2e011",
        "factory_validation_status": "NOT_VALIDATED",
        "has_user_template": null,
        "local_parameters": [
            {
                "name": "LanguageKey",
                "value": "'E'"
            },
            {
                "name": "sourceSystem",
                "value": "''"
            }
        ],
        "namespace": "celonis",
        "target": {
            "entity_ref": {
                "name": "SalesOrder",
                "namespace": "celonis"
            },
            "kind": "OBJECT"
        },
        "transformations": [
            {
                "change_sql_factory_datasets": [
                    {
                        "id": "CDPOS",
                        "type_": "SQL_FACTORY_DATA_SET",
                        "complete_overwrite": false,
                        "disabled": false,
                        "materialise_cte": false,
                        "overwrite": null,
                        "sql": "SELECT <%=sourceSystem%>  || 'SalesOrder_' || \"CDPOS\".\"TABKEY\"       AS \"ObjectID\",\n\t<%=sourceSystem%>  || \"CDPOS\".\"TABKEY\" || \"CDPOS\".\"TABNAME\" || \"CDPOS\".\"FNAME\"\n       || \"CDPOS\".\"CHANGENR\" || \"CDPOS\".\"CHNGIND\"                    AS \"ID\",\n       CAST(\"CDHDR\".\"UDATE\" AS DATE) + CAST(\"CDHDR\".\"UTIME\" AS TIME) AS \"Time\",\n       CASE\n           WHEN \"CDPOS\".\"FNAME\" = 'VDATU' THEN 'RequestedDeliveryDate'\n           END                                                       AS \"Attribute\",\n       CASE\n           WHEN \"CDPOS\".\"VALUE_OLD\" LIKE '%-' THEN CONCAT('-', REPLACE(LTRIM(\"CDPOS\".\"VALUE_OLD\"), '-', ''))\n           ELSE \"CDPOS\".\"VALUE_OLD\" END                              AS \"OldValue\",\n       CASE\n           WHEN \"CDPOS\".\"VALUE_NEW\" LIKE '%-' THEN CONCAT('-', REPLACE(LTRIM(\"CDPOS\".\"VALUE_NEW\"), '-', ''))\n           ELSE \"CDPOS\".\"VALUE_NEW\" END                              AS \"NewValue\",\n       'User_' || \"CDHDR\".\"MANDANT\" || \"CDHDR\".\"USERNAME\"            AS \"ChangedBy\",\n       \"CDHDR\".\"TCODE\"                                               AS \"OperationType\",\n       \"CDHDR\".\"CHANGENR\"                                            AS \"OperationID\",\n       CASE\n           WHEN \"USR02\".\"USTYP\" IN ('B', 'C') THEN 'Automatic'\n           ELSE 'Manual' END                                         AS \"ExecutionType\"\nFROM \"CDPOS\" AS \"CDPOS\"\n         LEFT JOIN \"CDHDR\" AS \"CDHDR\" ON\n    \"CDPOS\".\"MANDANT\" = \"CDHDR\".\"MANDANT\"\n    AND \"CDPOS\".\"OBJECTCLAS\" = \"CDHDR\".\"OBJECTCLAS\"\n    AND \"CDPOS\".\"OBJECTID\" = \"CDHDR\".\"OBJECTID\"\n    AND \"CDPOS\".\"CHANGENR\" = \"CDHDR\".\"CHANGENR\"\n        AND \"CDPOS\".\"OBJECTCLAS\" = 'VERKBELEG'\n         LEFT JOIN \"USR02\" AS \"USR02\"\n                   ON \"CDHDR\".\"USERNAME\" = \"USR02\".\"BNAME\"\n                       AND \"CDHDR\".\"MANDANT\" = \"USR02\".\"MANDT\"\nWHERE \"CDPOS\".\"CHNGIND\" = 'U'\n  AND \"CDPOS\".\"TABNAME\" = 'VBAK'\n  AND \"CDPOS\".\"FNAME\" IN ('VDATU')\n  AND \"CDPOS\".\"MANDANT\" IS NOT NULL\n  AND \"CDHDR\".\"MANDANT\" IS NOT NULL\n"
                    },
                    {
                        "id": "CDPOS (1)",
                        "type_": "SQL_FACTORY_DATA_SET",
                        "complete_overwrite": false,
                        "disabled": false,
                        "materialise_cte": false,
                        "overwrite": null,
                        "sql": "SELECT <%=sourceSystem%>  || 'SalesOrder_' || SUBSTRING(\"CDPOS\".\"TABKEY\", 0, 14)                AS \"ObjectID\",\n\t<%=sourceSystem%>  || \"CDPOS\".\"TABKEY\" || \"CDPOS\".\"TABNAME\" || \"CDPOS\".\"FNAME\"\n       || \"CDPOS\".\"CHANGENR\" || \"CDPOS\".\"CHNGIND\"                                               AS \"ID\",\n       CAST(\"CDHDR\".\"UDATE\" AS DATE) + COALESCE(CAST(\"CDHDR\".\"UTIME\" AS TIME), TIME '23:59:59') AS \"Time\",\n       CASE\n           WHEN \"CDPOS\".\"FNAME\" = 'INCO1' OR \"CDPOS\".\"FNAME\" = 'INCO2' THEN 'FreightTerms'\n           WHEN \"CDPOS\".\"FNAME\" = 'ZTERM' THEN 'PaymentTerms'\n           END                                                                                  AS \"Attribute\",\n       CASE\n           WHEN \"CDPOS\".\"VALUE_OLD\" LIKE '%-' THEN CONCAT('-', REPLACE(LTRIM(\"CDPOS\".\"VALUE_OLD\"), '-', ''))\n           ELSE \"CDPOS\".\"VALUE_OLD\" END                                                         AS \"OldValue\",\n       CASE\n           WHEN \"CDPOS\".\"VALUE_NEW\" LIKE '%-' THEN CONCAT('-', REPLACE(LTRIM(\"CDPOS\".\"VALUE_NEW\"), '-', ''))\n           ELSE \"CDPOS\".\"VALUE_NEW\" END                                                         AS \"NewValue\",\n       'User_' || \"CDHDR\".\"MANDANT\" || \"CDHDR\".\"USERNAME\"                                       AS \"ChangedBy\",\n       \"CDHDR\".\"TCODE\"                                                                          AS \"OperationType\",\n       \"CDHDR\".\"CHANGENR\"                                                                       AS \"OperationID\",\n       CASE\n           WHEN \"USR02\".\"USTYP\" IN ('B', 'C') THEN 'Automatic'\n           ELSE 'Manual' END                                                                    AS \"ExecutionType\"\nFROM \"CDPOS\" AS \"CDPOS\"\n         LEFT JOIN \"CDHDR\" AS \"CDHDR\" ON\n    \"CDPOS\".\"MANDANT\" = \"CDHDR\".\"MANDANT\"\n    AND \"CDPOS\".\"OBJECTCLAS\" = \"CDHDR\".\"OBJECTCLAS\"\n    AND \"CDPOS\".\"OBJECTID\" = \"CDHDR\".\"OBJECTID\"\n    AND \"CDPOS\".\"CHANGENR\" = \"CDHDR\".\"CHANGENR\"\n         LEFT JOIN \"USR02\" AS \"USR02\"\n                   ON \"CDHDR\".\"USERNAME\" = \"USR02\".\"BNAME\"\n                       AND \"CDHDR\".\"MANDANT\" = \"USR02\".\"MANDT\"\nWHERE \"CDPOS\".\"CHNGIND\" = 'U'\n  AND \"CDPOS\".\"TABNAME\" = 'VBKD'\n  AND SUBSTRING(\"CDPOS\".\"TABKEY\", 14, 6) = '000000'\n  AND \"CDPOS\".\"FNAME\" IN ('INCO1', 'INCO2', 'ZTERM')\n  AND \"CDPOS\".\"MANDANT\" IS NOT NULL\n  AND \"CDHDR\".\"MANDANT\" IS NOT NULL\n"
                    },
                    {
                        "id": "JCDS",
                        "type_": "SQL_FACTORY_DATA_SET",
                        "complete_overwrite": false,
                        "disabled": false,
                        "materialise_cte": false,
                        "overwrite": null,
                        "sql": "SELECT <%=sourceSystem%>  || 'SalesOrder_' || \"VBAK\".\"MANDT\" || \"VBAK\".\"VBELN\"                     AS \"ObjectID\",\n\t<%=sourceSystem%>  || \"VBAK\".\"VBELN\" || \"JCDS\".\"MANDT\" || \"JCDS\".\"OBJNR\"\n       || \"JCDS\".\"STAT\" || \"JCDS\".\"CHGNR\"                                                          AS \"ID\",\n       CAST(\"JCDS\".\"UDATE\" AS DATE) + CAST(\"JCDS\".\"UTIME\" AS TIME)                                 AS \"Time\",\n       'DocumentStatus'                                                                            AS \"Attribute\",\n       LAG(\"JCDS\".\"STAT\", 1, NULL)\n       OVER (PARTITION BY \"JCDS\".\"OBJNR\", \"JCDS\".\"STAT\"\n           ORDER BY \"JCDS\".\"OBJNR\", \"JCDS\".\"STAT\", \"JCDS\".\"CHGNR\", \"JCDS\".\"UDATE\", \"JCDS\".\"UTIME\") AS \"OldValue\",\n       \"JCDS\".\"STAT\"                                                                               AS \"NewValue\",\n       'User_' || \"JCDS\".\"USNAM\"                                                                   AS \"ChangedBy\",\n       \"JCDS\".\"CDTCODE\"                                                                            AS \"OperationType\",\n       CAST(\"JCDS\".\"CHGNR\" AS VARCHAR)                                                             AS \"OperationID\",\n       CASE\n           WHEN \"USR02\".\"USTYP\" IN ('B', 'C') THEN 'Automatic'\n           ELSE 'Manual' END                                                                       AS \"ExecutionType\"\nFROM \"JCDS\" AS \"JCDS\"\n         LEFT JOIN \"VBAK\" AS \"VBAK\"\n                   ON \"JCDS\".\"OBJNR\" = \"VBAK\".\"OBJNR\"\n         LEFT JOIN \"TJ02T\" AS \"TJ02T\"\n                   ON \"JCDS\".\"STAT\" = \"TJ02T\".\"ISTAT\"\n                       AND \"TJ02T\".\"SPRAS\" = <%=LanguageKey%> \n         LEFT JOIN \"USR02\" AS \"USR02\"\n                   ON \"JCDS\".\"USNAM\" = \"USR02\".\"BNAME\"\n                       AND \"JCDS\".\"MANDT\" = \"USR02\".\"MANDT\"\nWHERE \"VBAK\".\"VBTYP\" IN ('C', 'I')\n  AND \"JCDS\".\"INACT\" IS NULL\n  AND \"JCDS\".\"UDATE\" IS NOT NULL\n  AND \"JCDS\".\"MANDT\" IS NOT NULL\n  AND \"VBAK\".\"MANDT\" IS NOT NULL\n"
                    },
                    {
                        "id": "VBAK (1)",
                        "type_": "SQL_FACTORY_DATA_SET",
                        "complete_overwrite": false,
                        "disabled": false,
                        "materialise_cte": false,
                        "overwrite": null,
                        "sql": "SELECT <%=sourceSystem%>  || 'SalesOrder_' || \"VBAK\".\"MANDT\" || \"VBAK\".\"VBELN\" AS \"ObjectID\",\n\t<%=sourceSystem%>  || \"NAST\".\"MANDT\" || \"NAST\".\"KAPPL\" || \"NAST\".\"OBJKY\"\n       || \"NAST\".\"KSCHL\" || \"NAST\".\"SPRAS\" || COALESCE(\"NAST\".\"PARNR\", '')\n       || COALESCE(\"NAST\".\"PARVW\", '') || \"NAST\".\"ERDAT\" || \"NAST\".\"ERUHR\"     AS \"ID\",\n       CAST(\"NAST\".\"DATVR\" AS DATE) + CAST(\"NAST\".\"UHRVR\" AS TIME)             AS \"Time\",\n       CASE\n           WHEN \"NAST\".\"KSCHL\" = 'BA00' THEN 'SendOrderConfirmation'\n           END                                                                 AS \"Attribute\",\n       NULL                                                                    AS \"OldValue\",\n       NULL                                                                    AS \"NewValue\",\n       'User_' || \"NAST\".\"MANDT\" || \"NAST\".\"USNAM\"                             AS \"ChangedBy\",\n       \"NAST\".\"TCODE\"                                                          AS \"OperationType\",\n       NULL                                                                    AS \"OperationID\",\n       CASE\n           WHEN \"USR02\".\"USTYP\" IN ('B', 'C') THEN 'Automatic'\n           ELSE 'Manual' END                                                   AS \"ExecutionType\"\nFROM \"VBAK\" AS \"VBAK\"\n         LEFT JOIN \"NAST\" AS \"NAST\"\n                   ON \"VBAK\".\"VBELN\" = \"NAST\".\"OBJKY\"\n                       AND \"VBAK\".\"MANDT\" = \"NAST\".\"MANDT\"\n                       AND \"NAST\".\"DATVR\" IS NOT NULL\n                       AND \"NAST\".\"KAPPL\" = 'V1'\n                       AND \"NAST\".\"KSCHL\" IN ('BA00')\n         LEFT JOIN \"USR02\" AS \"USR02\"\n                   ON \"NAST\".\"MANDT\" = \"USR02\".\"MANDT\"\n                       AND \"NAST\".\"USNAM\" = \"USR02\".\"BNAME\"\nWHERE \"VBAK\".\"MANDT\" IS NOT NULL\n  AND \"NAST\".\"MANDT\" IS NOT NULL\n"
                    }
                ],
                "foreign_key_names": [
                    "CreatedBy",
                    "CreditManagement",
                    "Customer"
                ],
                "namespace": "celonis",
                "property_names": [
                    "CompanyCode",
                    "CompanyCodeText",
                    "CreationExecutionType",
                    "CreationTime",
                    "Currency",
                    "DatabaseSalesOrderNumber",
                    "DistributionChannel",
                    "DistributionChannelText",
                    "DocumentCategory",
                    "DocumentCategoryText",
                    "ExternalPurchaseOrderDate",
                    "ExternalPurchaseOrderNumber",
                    "FreightTerms",
                    "ID",
                    "NetAmount",
                    "ObjectNumber",
                    "OrderConfirmationStatus",
                    "OverallProcessingStatus",
                    "PaymentTerms",
                    "RequestedDeliveryDate",
                    "SalesDocumentType",
                    "SalesDocumentTypeText",
                    "SalesOffice",
                    "SalesOfficeText",
                    "SalesOrganization",
                    "SalesOrganizationText",
                    "ShippingDetails",
                    "ShippingDetailsText",
                    "SourceSystemInstance",
                    "SourceSystemType",
                    "SystemSalesOrderNumber"
                ],
                "property_sql_factory_datasets": [
                    {
                        "id": "VBAK",
                        "type_": "SQL_FACTORY_DATA_SET",
                        "complete_overwrite": false,
                        "disabled": false,
                        "materialise_cte": false,
                        "overwrite": null,
                        "sql": "SELECT <%=sourceSystem%>  || 'SalesOrder_' || \"VBAK\".\"MANDT\" || \"VBAK\".\"VBELN\" AS \"ID\",\n    CAST(\"VBAK\".\"ERDAT\" AS DATE) + CAST(\"VBAK\".\"ERZET\" AS TIME)                AS \"CreationTime\",\n\t<%=sourceSystem%>  || 'User_' || \"VBAK\".\"MANDT\" || \"VBAK\".\"ERNAM\"             AS \"CreatedBy\",\n    CASE\n        WHEN \"USR02\".\"USTYP\" IN ('B', 'C') THEN 'Automatic'\n        ELSE 'Manual' END                                                      AS \"CreationExecutionType\",\n    \"VBAK\".\"OBJNR\"                                                             AS \"ObjectNumber\",\n    \"VBAK\".\"AUART\"                                                             AS \"SalesDocumentType\",\n    \"TVAKT\".\"BEZEI\"                                                            AS \"SalesDocumentTypeText\",\n    \"VBAK\".\"BUKRS_VF\"                                                          AS \"CompanyCode\",\n    \"T001\".\"BUTXT\"                                                             AS \"CompanyCodeText\",\n\t<%=sourceSystem%>  || 'Customer_' || \"VBAK\".\"MANDT\" || \"VBAK\".\"KUNNR\"         AS \"Customer\",\n    \"VBUK\".\"GBSTK\"                                                             AS \"OverallProcessingStatus\",\n    \"VBUK\".\"BESTK\"                                                             AS \"OrderConfirmationStatus\",\n    \"VBAK\".\"VSBED\"                                                             AS \"ShippingDetails\",\n    \"TVSBT\".\"VTEXT\"                                                            AS \"ShippingDetailsText\",\n    CASE\n        WHEN \"VBKD\".\"INCO2\" IS NOT NULL\n            THEN \"VBKD\".\"INCO1\" || '_' || \"VBKD\".\"INCO2\"\n        ELSE \"VBKD\".\"INCO1\" END                                                AS \"FreightTerms\",\n    \"VBKD\".\"ZTERM\"                                                             AS \"PaymentTerms\",\n    \"VBAK\".\"VKORG\"                                                             AS \"SalesOrganization\",\n    \"TVKOT\".\"VTEXT\"                                                            AS \"SalesOrganizationText\",\n    \"VBAK\".\"VTWEG\"                                                             AS \"DistributionChannel\",\n    \"TVTWT\".\"VTEXT\"                                                            AS \"DistributionChannelText\",\n    \"VBAK\".\"VKBUR\"                                                             AS \"SalesOffice\",\n    \"TVKBT\".\"BEZEI\"                                                            AS \"SalesOfficeText\",\n\t<%=sourceSystem%>  || 'CustomerMasterCreditManagement_' || \"VBAK\".\"MANDT\" || \"VBAK\".\"KUNNR\"\n    || \"VBAK\".\"KKBER\"                                                          AS \"CreditManagement\",\n    \"VBAK\".\"NETWR\"                                                             AS \"NetAmount\",\n    \"VBAK\".\"WAERK\"                                                             AS \"Currency\",\n    \"VBAK\".\"VBTYP\"                                                             AS \"DocumentCategory\",\n    \"DD07T_VBTYP\".\"DDTEXT\"                                                     AS \"DocumentCategoryText\",\n    \"VBAK\".\"VBELN\"                                                             AS \"SystemSalesOrderNumber\",\n    \"VBAK\".\"VBELN\"                                                             AS \"DatabaseSalesOrderNumber\",\n    CAST(\"VBAK\".\"VDATU\" AS TIMESTAMP)                                          AS \"RequestedDeliveryDate\",\n    'SAP'                                                                      AS \"SourceSystemType\",\n    \"VBAK\".\"MANDT\"                                                             AS \"SourceSystemInstance\",\n    \"VBAK\".\"BSTNK\"                                                             AS \"ExternalPurchaseOrderNumber\",\n    CAST(\"VBAK\".\"BSTDK\" AS TIMESTAMP)                                          AS \"ExternalPurchaseOrderDate\"\nFROM \"VBAK\" AS \"VBAK\"\n         LEFT JOIN \"VBUK\" AS \"VBUK\"\n                   ON \"VBAK\".\"MANDT\" = \"VBUK\".\"MANDT\"\n                       AND \"VBAK\".\"VBELN\" = \"VBUK\".\"VBELN\"\n         LEFT JOIN \"VBKD\" AS \"VBKD\"\n                   ON \"VBAK\".\"MANDT\" = \"VBKD\".\"MANDT\"\n                       AND \"VBAK\".\"VBELN\" = \"VBKD\".\"VBELN\"\n                       AND \"VBKD\".\"POSNR\" = '000000'\n         LEFT JOIN \"T001\" AS \"T001\"\n                   ON \"VBAK\".\"MANDT\" = \"T001\".\"MANDT\"\n                       AND \"VBAK\".\"BUKRS_VF\" = \"T001\".\"BUKRS\"\n         LEFT JOIN \"TVAKT\" AS \"TVAKT\"\n                   ON \"VBAK\".\"MANDT\" = \"TVAKT\".\"MANDT\"\n                       AND \"VBAK\".\"AUART\" = \"TVAKT\".\"AUART\"\n                       AND \"TVAKT\".\"SPRAS\" = <%=LanguageKey%> \n         LEFT JOIN \"TVKOT\" AS \"TVKOT\"\n                   ON \"VBAK\".\"MANDT\" = \"TVKOT\".\"MANDT\"\n                       AND \"VBAK\".\"VKORG\" = \"TVKOT\".\"VKORG\"\n                       AND \"TVKOT\".\"SPRAS\" = <%=LanguageKey%> \n         LEFT JOIN \"TVTWT\" AS \"TVTWT\"\n                   ON \"VBAK\".\"MANDT\" = \"TVTWT\".\"MANDT\"\n                       AND \"VBAK\".\"VTWEG\" = \"TVTWT\".\"VTWEG\"\n                       AND \"TVTWT\".\"SPRAS\" = <%=LanguageKey%> \n         LEFT JOIN \"TVKBT\" AS \"TVKBT\"\n                   ON \"VBAK\".\"MANDT\" = \"TVKBT\".\"MANDT\"\n                       AND \"VBAK\".\"VKBUR\" = \"TVKBT\".\"VKBUR\"\n                       AND \"TVKBT\".\"SPRAS\" = <%=LanguageKey%> \n         LEFT JOIN \"TVAK\" AS \"TVAK\"\n                   ON \"VBAK\".\"MANDT\" = \"TVAK\".\"MANDT\"\n                       AND \"VBAK\".\"AUART\" = \"TVAK\".\"AUART\"\n         LEFT JOIN \"DD07T\" AS \"DD07T_KLIMP\"\n                   ON \"TVAK\".\"KLIMP\" = \"DD07T_KLIMP\".\"DOMVALUE_L\"\n                       AND \"DD07T_KLIMP\".\"DOMNAME\" = 'KLIMP'\n                       AND \"DD07T_KLIMP\".\"DDLANGUAGE\" = <%=LanguageKey%> \n         LEFT JOIN \"USR02\" AS \"USR02\"\n                   ON \"VBAK\".\"MANDT\" = \"USR02\".\"MANDT\"\n                       AND \"VBAK\".\"ERNAM\" = \"USR02\".\"BNAME\"\n         LEFT JOIN \"DD07T\" AS \"DD07T_VBTYP\"\n                   ON \"VBAK\".\"VBTYP\" = \"DD07T_VBTYP\".\"DOMVALUE_L\"\n                       AND \"DD07T_VBTYP\".\"DOMNAME\" = 'VBTYP'\n                       AND \"DD07T_VBTYP\".\"DDLANGUAGE\" = <%=LanguageKey%> \n         LEFT JOIN \"TVSBT\" AS \"TVSBT\"\n                   ON \"VBAK\".\"MANDT\" = \"TVSBT\".\"MANDT\"\n                       AND \"VBAK\".\"VSBED\" = \"TVSBT\".\"VSBED\"\n                       AND \"TVSBT\".\"SPRAS\" = <%=LanguageKey%> \nWHERE \"VBAK\".\"MANDT\" IS NOT NULL\n  AND \"VBAK\".\"VBTYP\" IN ('C', 'I')\n"
                    }
                ],
                "relationship_transformations": []
            }
        ]
    }
]