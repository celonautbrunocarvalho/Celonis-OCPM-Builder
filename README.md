# OCPM Builder Assistant

A two-stage AI-assisted pipeline for building Celonis Object-Centric Process Mining (OCPM) models from raw business inputs.

## Overview

This project contains two AI assistant prompts that work in sequence:

1. **Requirements Gathering Assistant** — Reads raw project inputs and produces a structured OCPM requirements specification.
2. **OCPM Builder Assistant** — Takes the requirements specification and generates the full set of Celonis-compatible JSON configuration files.

## Project Structure

```
.
├── Input/
│   ├── Project input files/   <- Place your raw project files here
│   └── TEMPLATE/              <- Reference template (valid Celonis OCPM export)
├── Output/                    <- All generated outputs are written here
├── Requirements_Gathering_Assistant.md
├── OCPM_Builder_Prompt.md
└── README.md
```

## Stage 1: Requirements Gathering Assistant

**Prompt file:** `Requirements_Gathering_Assistant.md`

### What it does

Converts raw, unstructured business inputs into a standardized OCPM requirements document that the Builder can consume. It acts as the "analyst" that interprets your project materials and translates them into a formal specification.

### Input

Place all your project files in `Input/Project input files/`. The assistant accepts any combination of:

- Text / Markdown / CSV files (process descriptions, data schemas, field mappings)
- JSON files (table definitions, API schemas, data dictionaries)
- Images (Figma boards, ERDs, process flow diagrams)
- PDFs (technical documentation, architecture docs)
- Meeting transcripts / notes (workshop outputs, stakeholder interviews)

### Output

A Markdown file saved to `Output/<ProcessName>_Requirements.md` containing:

| Section | Description |
| :--- | :--- |
| 0. Process Overview & Source System Context | Business problem, source system type, source tables summary |
| 1. Core Object Definitions | Business entities with attributes, data types, and primary keys |
| 2. Event Log Definitions | Activities/milestones with timestamps and foreign key linkages |
| 3. Relationship Modeling | Object-to-Object and Object-to-Event relationships with cardinality |
| 4. Data Transformation Logic | SQL/PQL extraction logic for objects and events |
| 5. Data Connection Technical IDs | UUID mappings for Celonis data connections (to be filled by consultant) |

### Usage

1. Drop your project files into `Input/Project input files/`.
2. Open a new AI chat session and load `Requirements_Gathering_Assistant.md` as the system prompt.
3. The assistant will scan the input folder, read all files, and generate the requirements document in `Output/`.

---

## Stage 2: OCPM Builder Assistant

**Prompt file:** `OCPM_Builder_Prompt.md`

### What it does

Takes the structured requirements specification (from Stage 1) and generates a complete, import-ready set of Celonis OCPM JSON configuration files. It also validates all output against the reference template in `Input/TEMPLATE/` to ensure format compliance.

### Input

The Markdown requirements file generated by Stage 1 (or a manually authored equivalent) containing:

- Business problem / process description
- Data schema (tables, columns, types, relationships)
- Source system type

### Output

A full Celonis OCPM package written to `Output/` with this folder structure:

| Folder | Files | Description |
| :--- | :--- | :--- |
| `catalog_processes/` | `catalog_processes_<Process>.json` | Process catalog metadata |
| `data_sources/` | `data_sources_<Name>.json` | Data connection definitions |
| `environments/` | `environments_develop.json`, `environments_production.json` | Environment configs |
| `events/` | `event_<EventName>.json` | Event/activity definitions |
| `factories/` | `factories_<Entity>.json` | Data transformation configurations |
| `objects/` | `object_<ObjectName>.json` | Business object definitions |
| `perspectives/` | `perspective_<Process>.json` | Analytical view definitions |
| `processes/` | `process_<Process>.json` | Process groupings of objects and events |
| `sql_statements/` | `sql_statement_<Entity>.json` | SQL/PQL transformation logic |
| `categories/` | *(empty)* | Reserved |
| `parameters/` | *(empty)* | Reserved |
| `template_factories/` | *(empty)* | Reserved |
| `templates/` | *(empty)* | Reserved |

### Validation

After generating all files, the Builder runs a validation step that checks:

- **Folder structure** matches the 13 subfolders in `Input/TEMPLATE/`
- **File naming** uses the correct prefixes (`object_`, `event_`, `factories_`, etc.)
- **JSON schema** for each file type has all required keys matching the template structure
- **Mandatory fields** exist (e.g., `ID` on objects, `ID` + `Time` on events)
- **Cross-file consistency** (relationships reference existing objects, factory IDs match, counts are accurate)

### Usage

1. Ensure the requirements Markdown file is ready (either from Stage 1 or manually created).
2. Open a new AI chat session and load `OCPM_Builder_Prompt.md` as the system prompt.
3. Provide the requirements file as input.
4. The assistant generates all JSON files in `Output/` and runs validation against the template.

---

## End-to-End Workflow

```
Input/Project input files/     Requirements Gathering       Output/<Process>_Requirements.md
  (transcripts, schemas,   -->   Assistant (Stage 1)    -->   (structured OCPM spec)
   ERDs, Figma, docs...)

Output/<Process>_Requirements.md     OCPM Builder            Output/
  (structured OCPM spec)         -->  Assistant (Stage 2) -->   catalog_processes/
                                                                events/
                                                                factories/
                                                                objects/
                                                                perspectives/
                                                                processes/
                                                                sql_statements/
                                                                ...
```

## Reference Template

The `Input/TEMPLATE/` folder contains a complete, valid Celonis OCPM export (SAP ECC Procurement, Accounts Payable, Order Management, etc.). It serves two purposes:

1. **Format reference** for the Builder to understand the expected JSON structure
2. **Validation baseline** to verify generated output matches the platform's expected format
